<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
        <script language="javascript" src="JSUnit/app/jsUnitCore.js"></script>
        <script language="javascript" src="../Scripts/shCore.js"></script>
		<link type="text/css" rel="stylesheet" href="../Styles/shCore.css"></link>
	</head>
	<body>
		<script>
			function test_measureSpace_should_return_a_number()
			{
				assertNotNaN(dp.sh.Utils.measureSpace());
			}
			
			function test_padNumber()
			{
				assertEquals('0', dp.sh.Utils.padNumber(0, 0));
				assertEquals('1', dp.sh.Utils.padNumber(1, 1));
				
				assertEquals('02', dp.sh.Utils.padNumber(2, 2));
				assertEquals('003', dp.sh.Utils.padNumber(3, 3));
				assertEquals('000101', dp.sh.Utils.padNumber(101, 6));
			}
			
			function test_decorateBit()
			{
//				assertEquals(' hello ', dp.sh.Utils.decorateBit(' hello '));
//				assertEquals('&nbsp;&nbsp; hello&nbsp;&nbsp; ', dp.sh.Utils.decorateBit('   hello   '));

//				assertEquals('<span class="reset font t">hello</span>', dp.sh.Utils.decorateBit('hello', 't'));
				assertEquals('&nbsp;&nbsp; <span class="reset font t">hello</span>', dp.sh.Utils.decorateBit('   hello', 't'));
			}
			
			function test_trim()
			{
				assertEquals('hello', dp.sh.Utils.trim(' \n\n hello \n\n '))
			}
			
			function test_processUrls()
			{
				assertEquals('  <a href="http://...">http://...</a>  ', dp.sh.Utils.processUrls('  http://...  '));
			}
			
			function test_parseParams_simple_string()
			{
				function test(str, name, expected)
				{
					var result = dp.sh.Utils.parseParams(str);
					assertEquals(str, expected, result[name]);
				}
				
				test("language: c-sharp", "language", "c-sharp");
				test("language:c-sharp", "language", "c-sharp");
				test("firstLine:10; language:c-sharp;", "firstLine", "10");
				test("firstLine: 10; language: c-sharp;", "language", "c-sharp");
			}
			
			function test_parseParams_array_values()
			{
				var result = dp.sh.Utils.parseParams("highlight-lines: [2, 4]");
				assertNotUndefined("Shouldn't be null", result["highlight-lines"]);
				assertUndefined("Shouldn't be a string", result["highlight-lines"].substr);
				assertEquals("Array values should match", "2, 4", result["highlight-lines"].join(", "));
			}
			
			function test_inArray()
			{
				var array = [1, 2, 3, "hello"];
				
				assertTrue("1", dp.sh.Utils.inArray(array, 1));
				assertTrue("hello", dp.sh.Utils.inArray(array, "hello"));
				assertFalse("10", dp.sh.Utils.inArray(array, 10));
			}
			
			function test_unindent()
			{
				assertEquals(
					'line1\nline2\n',
					dp.sh.Utils.unindent('\tline1\n\tline2\n')
				);
				
				assertEquals(
					'line1\nline2\n',
					dp.sh.Utils.unindent('    line1\n    line2\n')
				);
				
				assertEquals(
					'line1\n    line2\n',
					dp.sh.Utils.unindent('    line1\n        line2\n')
				);
			}
			
			function test_trimFirstAndLastLines()
			{
				assertEquals(
					'\tline1\n\tline2',
					dp.sh.Utils.trimFirstAndLastLines('\tline1\n\tline2\n')
				);

				assertEquals(
					'\tline1\n\tline2',
					dp.sh.Utils.trimFirstAndLastLines('  \n\tline1\n\tline2\n  ')
				);
				
				assertEquals(
					'\tline1\n\tline2',
					dp.sh.Utils.trimFirstAndLastLines('\n\tline1\n\tline2   ')
				);
			}
			
			function test_processSmartTabs()
			{
				assertEquals(
					'    line1\n    line2',
					dp.sh.Utils.processSmartTabs('\tline1\n\tline2', 4)
				);
			}
		</script>
	</body>
</html>
